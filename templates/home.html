<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Her Track - Dashboard</title>
    
    <!-- ‚≠êÔ∏è [‡πÄ‡∏û‡∏¥‡πà‡∏°] ‚≠êÔ∏è Library ‡∏Ç‡∏≠‡∏á FullCalendar -->
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;600;700;800&display=swap" rel="stylesheet"> 
        
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700&display=swap');
        
        /* ‚≠êÔ∏è [‡πÄ‡∏û‡∏¥‡πà‡∏°] ‚≠êÔ∏è Keyframes (‡∏à‡∏≤‡∏Å dashboard) */
        @keyframes slideUpFadeIn {
          from { opacity: 0; transform: translateY(15px); }
          to { opacity: 1; transform: translateY(0); }
        }

        body {
            padding-top: 80px; 
            padding-bottom: 70px;
            margin: 0;
            font-family: 'Kanit', sans-serif;
            background-color: #d5e5f3; 
            color: #333333;
            background-image: url({{ url_for('static', filename='bg.jpg') }});
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        .top-nav {
            position: fixed;
            top: 0;
            width: 100%;
            display: flex;
            justify-content: flex-start;
            align-items: center; 
            background-color: #b0d3f2;
            border-bottom: 1px solid #b0d3f2;
            padding: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            z-index: 1000;
            gap: 20px;
        }
        .user-info {
            margin-left: auto; 
            padding-right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: #333;
            font-size: 0.9em;
        }
        .logout-btn {
            background: #FB6A90;
            color: white;
            padding: 5px 10px;
            border-radius: 8px;
            text-decoration: none;
            font-size: 0.9em;
            transition: background 0.2s;
            border: none;
            cursor: pointer;
        }
        .logout-btn:hover {
            background: #d6336c;
        }

        /* (CSS ‡∏Ç‡∏≠‡∏á ‡∏ß‡∏á‡∏Å‡∏•‡∏° ‡πÅ‡∏•‡∏∞‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) */
        .circle {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 250px;
            height: 250px;
            background: linear-gradient(180deg, #fb6a91cd, #b0d3f2c8); 
            border-radius: 50%;
            margin: 20px auto 30px; /* ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‚≠êÔ∏è ‡∏•‡∏î margin-top */
            padding: 20px;
            color: white;
            text-align: center; 
        } 
        .circle.is-period {
            background: linear-gradient(180deg, #d6336c, #fb6a91);
        }
        .Period_in { font-size: 1.2em; margin-bottom: 5px; font-weight: 300; }
        .days { font-size: 3.5em; font-weight: bold; margin: 0; }
        .date { font-size: 1em; margin-top: 5px; }
        
        .button-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 0 20px;
            max-width: 900px; /* ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‚≠êÔ∏è ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î */
            margin: 0 auto;
        }
        .button-card {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .self-assessment {
            font-size: 1.1em;
            font-weight: bold;
            color: #d6336c;
            margin-bottom: 5px;
        }
        .self-assessment2 {
            font-size: 0.9em;
            color: #777;
            margin: 0;
        }
        #setup-card {
            display: none; 
            border: 2px dashed #d6336c;
            background-color: #fff0f5;
            max-width: 400px; /* ‚≠êÔ∏è [‡πÄ‡∏û‡∏¥‡πà‡∏°] ‚≠êÔ∏è ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ */
            margin: 0 auto 15px auto; /* ‚≠êÔ∏è [‡πÄ‡∏û‡∏¥‡πà‡∏°] ‚≠êÔ∏è ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏≤‡∏á */
        }
        #setup-card label {
            display: block;
            margin-top: 10px;
            font-weight: 600;
        }
        #setup-card input[type="date"] {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ffccd9;
            border-radius: 5px;
            box-sizing: border-box;
            font-family: 'Kanit';
        }
        #saveInitialDataButton {
            width: 100%;
            padding: 15px;
            background-color: #d6336c; 
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            font-family: 'Kanit';
            margin-top: 15px;
        }
        #setup-message {
            font-size: 0.9em;
            color: #d6336c;
            text-align: center;
            display: none;
        }

        /* ‚≠êÔ∏è [‡πÄ‡∏û‡∏¥‡πà‡∏° CSS ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ] ‚≠êÔ∏è (‡∏à‡∏≤‡∏Å dashboard.html) */
        h1 {
          color: #FB6A90; text-align: center;
          text-shadow: 0 2px 4px rgba(251, 106, 144, 0.1);
          margin-top: 0; 
        }
        
        /* ‚≠êÔ∏è [‡πÄ‡∏û‡∏¥‡πà‡∏°] ‚≠êÔ∏è CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå */
        #analysis-card {
            display: none; /* ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô */
            background-color: #fffafb;
            border: 1px solid #fde0e6;
            line-height: 1.8;
            font-size: 0.95em;
            max-width: 450px; /* ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á */
            margin: -10px auto 15px auto; /* ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏≤‡∏á */
        }
        #analysis-card h4 {
            color: #d6336c;
            margin-top: 0;
            border-bottom: 1px solid #ffccd9;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        #analysis-card strong.highlight-ovulation {
            color: #2e8b57;
            background-color: #e0ffe0;
            padding: 2px 6px;
            border-radius: 4px;
        }
        #analysis-card strong.highlight-period {
            color: #d6336c;
            background-color: #ffccd9;
            padding: 2px 6px;
            border-radius: 4px;
        }

        /* (CSS ‡∏Ç‡∏≠‡∏á Calendar) */
        #calendar-container {
          /* (‡∏•‡∏ö max-width 900px ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ .button-group ‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡πâ‡∏ß) */
          margin: 0 auto 20px auto;
          background: #fff; border-radius: 20px;
          box-shadow: 0 8px 24px rgba(251, 106, 144, 0.08);
          padding: 20px;
        }
        .fc-toolbar-title {
          font-family: 'Nunito Sans', sans-serif;
          font-weight: 800 !important;
          font-size: 2rem !important;
          color: #FB6A90;
          text-shadow: 0 2px 4px rgba(251, 106, 144, 0.1);
        }
        .fc-button {
          background: none !important;
          border: 2px solid #fde0e6 !important;
          color: #FB6A90 !important;
          border-radius: 12px !important;
          box-shadow: none !important;
          transition: all 0.2s ease-out !important;
          font-weight: 700 !important;
          padding: 0.5em 0.8em !important;
          text-transform: capitalize !important;
        }
        .fc-today-button {
          background: #FB6A90 !important;
          color: white !important;
          border-color: #FB6A90 !important;
          box-shadow: 0 2px 5px rgba(251, 106, 144, 0.3) !important;
        }
        .fc-button:not(:disabled):not(.fc-today-button):hover {
          background: #fff0f4 !important;
          color: #FB6A90 !important;
          transform: translateY(-2px);
        }
        .fc-today-button:not(:disabled):hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 10px rgba(251, 106, 144, 0.4) !important;
        }
        .fc-button:disabled {
          opacity: 0.4 !important;
        }
        .fc-header-toolbar {
            align-items: center;
            padding: 10px 0;
        }
        .fc-daygrid-day:not(.fc-day-other) {
          cursor: pointer;
          transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
        }
        .fc-daygrid-day:not(.fc-day-other):hover {
          transform: translateY(-4px);
          box-shadow: 0 6px 16px rgba(251, 106, 144, 0.15);
          z-index: 10; background: #fff;
        }
        .fc-event {
          border: none !important; border-radius: 8px !important;
          padding: 4px 8px !important; font-weight: 600 !important;
          font-size: 0.85rem !important;
          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        #log-section {
          /* (‡∏•‡∏ö max-width 900px ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ .button-group ‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡πâ‡∏ß) */
          margin: 0 auto;
          background: white; border-radius: 20px;
          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
          padding: 24px; display: none;
          animation: slideUpFadeIn 0.5s ease-out forwards;
        }
        h2.selected-date {
          font-size: 1.5rem; font-weight: 800; color: #FB6A90;
          text-align: center; margin-bottom: 20px;
          border-bottom: 2px dashed #fde0e6; padding-bottom: 15px;
        }
        .section-title {
          font-weight: 700; color: #286BA9; font-size: 1.1rem;
          margin-bottom: 10px; border-left: 4px solid #B0D3F2; padding-left: 8px;
        }
        .mood-container, .symptom-container, .flow-container, .color-container {
          display: flex; flex-wrap: wrap; gap: 10px;
        }
        .mood, .symptom, .flow, .color-option {
          flex: 1 1 calc(33.33% - 10px); text-align: center;
          border: 2px solid #B0D3F2; border-radius: 14px;
          padding: 12px; background: #FAFDFF; cursor: pointer;
          font-weight: 600; transition: all 0.25s ease;
        }
        .mood:hover, .symptom:hover, .flow:hover, .color-option:hover {
          transform: scale(1.03);
        }
        .active {
          background-color: #FB6A90 !important; color: white !important;
          border-color: #FB6A90 !important;
          box-shadow: 0 4px 10px rgba(251, 106, 144, 0.3);
          transform: scale(1.02);
        }
        textarea {
          width: 100%; border-radius: 12px; border: 1.5px solid #B0D3F2;
          padding: 12px; font-family: inherit; font-size: 1rem;
          resize: vertical; margin-top: 10px; box-sizing: border-box;
          transition: border-color 0.2s, box-shadow 0.2s;
        }
        textarea:focus {
          outline: none; border-color: #FB6A90;
          box-shadow: 0 0 0 3px rgba(251, 106, 144, 0.2);
        }
        button {
          width: 100%; padding: 14px;
          color: white; font-weight: 700; border: none; border-radius: 12px;
          cursor: pointer; font-size: 1.1rem; margin-top: 10px;
          transition: all 0.2s ease-out;
        }
        #saveButton {
          background: linear-gradient(90deg, #FB6A90, #FE0C21);
        }
        .back-button {
          display: block; width: 100%; padding: 14px;
          background: linear-gradient(90deg, #B0D3F2, #79b7eb);
          color: white; font-weight: 700; border: none; border-radius: 12px;
          cursor: pointer; font-size: 1.1rem; text-align: center;
          text-decoration: none; margin-top: 10px; box-sizing: border-box;
          transition: all 0.2s ease-out;
        }
        #saveButton:hover, .back-button:hover {
          opacity: 0.9; transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        /* ‚≠êÔ∏è [‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î CSS ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°] ‚≠êÔ∏è */
    </style>
</head>
<body>

    <nav class="top-nav">
        <img src="{{ url_for('static', filename='logo.jpg') }}" width="90" alt="Her track logo" style="margin: 5px 20px 5px 20px;" >
        
        <div class="user-info">
            <span>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, <strong>{{ current_user.username }}</strong>!</span>
            <a href="{{ url_for('logout') }}" class="logout-btn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
        </div>
    </nav>
    
    <!-- ‚≠êÔ∏è [‡∏¢‡πâ‡∏≤‡∏¢] ‚≠êÔ∏è ‡∏¢‡πâ‡∏≤‡∏¢ H1 ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡∏ö‡∏ô‡∏™‡∏∏‡∏î -->
    <h1 style="padding-top: 20px;">ü©∑ Dashboard ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h1>

    <div class="circle">
        <p class="Period_in">‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å</p>
        <h3 class="days">... ‡∏ß‡∏±‡∏ô</h3>
        <p class="date">... ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ...</p>
    </div>

    <div class="button-group">
        
        <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ) -->
        <div id="setup-card" class="button-card">
            <p class="self-assessment">‚≠êÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å</p>
            <p class="self-assessment2">
                ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 2 ‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
            </p>
            
            <label for="initialLastStart">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</label>
            <input type="date" id="initialLastStart"> 
            
            <label for="initialPrevStart">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤:</label>
            <input type="date" id="initialPrevStart"> 
            
            <button id="saveInitialDataButton">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô</button>
            <p id="setup-message"></p>
        </div>

        <!-- ‚≠êÔ∏è [‡πÄ‡∏û‡∏¥‡πà‡∏°] ‚≠êÔ∏è ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå -->
        <div id="analysis-card" class="button-card">
            <h4>‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h4>
            <span id="analysis-content">... ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î ...</span>
        </div>


        <!-- ‚≠êÔ∏è [‡πÄ‡∏û‡∏¥‡πà‡∏° HTML ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ] ‚≠êÔ∏è (‡∏à‡∏≤‡∏Å dashboard.html) -->
        <div id="calendar-container">
            <div id="calendar"></div>
        </div>

        <div id="log-section">
            <h2 class="selected-date" id="selected-date-title">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≤‡∏Å‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô</h2>
            <div class="card">
            <div class="section-title">‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?</div>
            <div class="mood-container">
                <div class="mood" data-value="üòä ‡∏£‡πà‡∏≤‡πÄ‡∏£‡∏¥‡∏á">üòä ‡∏£‡πà‡∏≤‡πÄ‡∏£‡∏¥‡∏á</div>
                <div class="mood" data-value="üò¥ ‡∏≠‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏•‡∏µ‡∏¢">üò¥ ‡∏≠‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏•‡∏µ‡∏¢</div>
                <div class="mood" data-value="üò¢ ‡πÄ‡∏®‡∏£‡πâ‡∏≤">üò¢ ‡πÄ‡∏®‡∏£‡πâ‡∏≤</div>
                <div class="mood" data-value="üò£ ‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î">üò£ ‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î</div>
                <div class="mood" data-value="‚ö° ‡∏Å‡∏£‡∏∞‡∏õ‡∏£‡∏µ‡πâ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡∏£‡πà‡∏≤">‚ö° ‡∏Å‡∏£‡∏∞‡∏õ‡∏£‡∏µ‡πâ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡∏£‡πà‡∏≤</div>
            </div>
            </div>
            <div class="card">
            <div class="section-title">‡∏°‡∏µ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á</div>
            <div class="symptom-container">
                <div class="symptom" data-value="‚ö° ‡∏õ‡∏ß‡∏î‡∏ó‡πâ‡∏≠‡∏á">‚ö° ‡∏õ‡∏ß‡∏î‡∏ó‡πâ‡∏≠‡∏á</div>
                <div class="symptom" data-value="‚òï ‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß">‚òï ‡∏õ‡∏ß‡∏î‡∏´‡∏±‡∏ß</div>
                <div class="symptom" data-value="üí§ ‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢">üí§ ‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢</div>
                <div class="symptom" data-value="üíß ‡∏ó‡πâ‡∏≠‡∏á‡∏≠‡∏∑‡∏î">üíß ‡∏ó‡πâ‡∏≠‡∏á‡∏≠‡∏∑‡∏î</div>
                <div class="symptom" data-value="üß° ‡πÄ‡∏à‡πá‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å">üß° ‡πÄ‡∏à‡πá‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏Å</div>
            </div>
            </div>
            <div class="card">
            <div class="section-title">‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
            <div class="flow-container">
                <div class="flow" data-value="‡∏ô‡πâ‡∏≠‡∏¢">‡∏ô‡πâ‡∏≠‡∏¢</div>
                <div class="flow" data-value="‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</div>
                <div class="flow" data-value="‡∏°‡∏≤‡∏Å">‡∏°‡∏≤‡∏Å</div>
            </div>
            </div>
            <div class="card">
            <div class="section-title">‡∏™‡∏µ‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
            <div class="color-container">
                <div class="color-option" data-value="‡πÅ‡∏î‡∏á‡∏™‡∏î">üî¥ ‡πÅ‡∏î‡∏á‡∏™‡∏î</div>
                <div class="color-option" data-value="‡∏ä‡∏°‡∏û‡∏π">üå∏ ‡∏ä‡∏°‡∏û‡∏π</div>
                <div class="color-option" data-value="‡∏™‡πâ‡∏°">üß° ‡∏™‡πâ‡∏°</div>
                <div class="color-option" data-value="‡πÅ‡∏î‡∏á‡πÄ‡∏Ç‡πâ‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•">ü§é ‡πÅ‡∏î‡∏á‡πÄ‡∏Ç‡πâ‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•</div>
                <div class="color-option" data-value="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏õ‡∏ô‡πÄ‡∏ó‡∏≤">üíö ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏õ‡∏ô‡πÄ‡∏ó‡∏≤</div>
                <div class="color-option" data-value="‡∏î‡∏≥‡∏Ñ‡∏•‡πâ‡∏≥">‚ö´ ‡∏î‡∏≥‡∏Ñ‡∏•‡πâ‡∏≥</div>
            </div>
            </div>
            <div class="card">
            <div class="section-title">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</div>
            <textarea id="notes" placeholder="..."></textarea>
            </div>

            <button id="saveButton">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
            <!-- ‚≠êÔ∏è [‡∏•‡∏ö‡∏õ‡∏∏‡πà‡∏°] ‚≠êÔ∏è (‡∏•‡∏ö‡∏õ‡∏∏‡πà‡∏° "‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å" ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡πâ‡∏ß) -->
        </div>
        <!-- ‚≠êÔ∏è [‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î HTML ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°] ‚≠êÔ∏è -->

    </div>

    <script>
        const thaiMonths = [
            "‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°", "‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå", "‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°", "‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô", "‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°", "‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô",
            "‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°", "‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°", "‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô", "‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°", "‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô", "‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"
        ];

        function formatThaiDate(date) {
            // ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‚≠êÔ∏è ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö object
            if (!date) return 'N/A';
            const d = date.getDate();
            const m = thaiMonths[date.getMonth()];
            const y = date.getFullYear() + 543; 
            return `${d} ${m} ${y}`;
        }
        
        // ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‚≠êÔ∏è ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô
        function loadHomeSummary() {
            const daysEl = document.querySelector(".days");
            const dateEl = document.querySelector(".date");
            const periodInEl = document.querySelector(".Period_in");
            const circleDiv = document.querySelector(".circle");
            const setupCard = document.getElementById('setup-card');
            
            // ‚≠êÔ∏è [‡πÄ‡∏û‡∏¥‡πà‡∏°] ‚≠êÔ∏è ‡∏î‡∏∂‡∏á Element ‡πÉ‡∏´‡∏°‡πà
            const calendarContainer = document.getElementById('calendar-container');
            const analysisCard = document.getElementById('analysis-card');
            const analysisContent = document.getElementById('analysis-content');

            // 1. ‡∏¢‡∏¥‡∏á API ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Backend
            fetch('/api/get_home_summary') // ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‚≠êÔ∏è ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡πÉ‡∏´‡∏°‡πà
                .then(res => res.json())
                .then(data => {
                    if (data.status === 'success') {
                        
                        // 2. ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
                        const nextPeriodDate = new Date(data.next_date);
                        const lastStartDate = new Date(data.last_start_date);
                        const ovulationDate = new Date(data.ovulation_date);
                        const today = new Date();
                        today.setHours(0, 0, 0, 0);

                        const oneDay = 1000 * 60 * 60 * 24;
                        const daysUntil = Math.ceil((nextPeriodDate - today) / oneDay);

                        // 3. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• [‡∏ß‡∏á‡∏Å‡∏•‡∏°]
                        if (daysUntil <= 0) {
                            periodInEl.textContent = `‡∏ñ‡∏∂‡∏á‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô`;
                            daysEl.textContent = `‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ`;
                            dateEl.textContent = `(‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏¢‡∏Å‡∏≥‡∏´‡∏ô‡∏î ${Math.abs(daysUntil)} ‡∏ß‡∏±‡∏ô)`;
                            circleDiv.classList.add('is-period'); 
                        } else {
                            periodInEl.textContent = `‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÉ‡∏ô‡∏≠‡∏µ‡∏Å`;
                            daysEl.textContent = `${daysUntil} ‡∏ß‡∏±‡∏ô`;
                            dateEl.textContent = `‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏° ${formatThaiDate(nextPeriodDate)}`;
                            circleDiv.classList.remove('is-period');
                        }
                        
                        // 4. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• [‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå] ‚≠êÔ∏è [‡πÄ‡∏û‡∏¥‡πà‡∏°] ‚≠êÔ∏è
                        analysisContent.innerHTML = `
                            üîπ **‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î**: ${formatThaiDate(lastStartDate)}<br>
                            üîπ **‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢**: ${data.avg_cycle_length} ‡∏ß‡∏±‡∏ô<br>
                            ü©∑ **‡∏ß‡∏±‡∏ô‡∏ï‡∏Å‡πÑ‡∏Ç‡πà‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì**: <strong class="highlight-ovulation">${formatThaiDate(ovulationDate)}</strong><br>
                            üåø **‡∏£‡∏≠‡∏ö‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏Ñ‡∏≤‡∏î‡∏ß‡πà‡∏≤**: <strong class="highlight-period">${formatThaiDate(nextPeriodDate)}</strong>
                        `;
                        
                        // 5. ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô UI ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‚≠êÔ∏è
                        setupCard.style.display = 'none';
                        analysisCard.style.display = 'block'; // ‚≠êÔ∏è ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
                        calendarContainer.style.display = 'block'; // ‚≠êÔ∏è ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô

                    } else if (data.status === 'no_data') {
                        // 4. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• (‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
                        periodInEl.textContent = `‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•`;
                        daysEl.textContent = `N/A`;
                        dateEl.textContent = `‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á`;
                        
                        // 5. ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô UI ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‚≠êÔ∏è
                        setupCard.style.display = 'block';
                        analysisCard.style.display = 'none'; // ‚≠êÔ∏è ‡∏ã‡πà‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
                        calendarContainer.style.display = 'none'; // ‚≠êÔ∏è ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô
                    }
                })
                .catch(err => {
                    console.error("Error fetching home summary:", err);
                    periodInEl.textContent = `‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î`;
                    daysEl.textContent = `‚ùå`;
                    dateEl.textContent = `‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ`;
                });
        }
        
        // --- (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô saveInitialData ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ---
        function saveInitialData() {
            const lastStart = document.getElementById('initialLastStart').value;
            const prevStart = document.getElementById('initialPrevStart').value;
            const msgEl = document.getElementById('setup-message');

            if (!lastStart || !prevStart) {
                msgEl.textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á 2 ‡∏ä‡πà‡∏≠‡∏á";
                msgEl.style.display = 'block';
                return;
            }

            msgEl.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...";
            msgEl.style.display = 'block';

            fetch('/api/initial_setup', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    lastStartDate: lastStart,
                    prevStartDate: prevStart
                })
            })
            .then(res => res.json())
            .then(data => {
                if (data.status === 'success') {
                    msgEl.textContent = "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏µ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤...";
                    setTimeout(() => {
                        window.location.reload();
                    }, 1500); 
                } else {
                    msgEl.textContent = `‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${data.message}`;
                }
            })
            .catch(err => {
                msgEl.textContent = "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ";
                console.error("Error saving initial data:", err);
            });
        }


        // ‚≠êÔ∏è [‡πÄ‡∏û‡∏¥‡πà‡∏° JavaScript ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ô‡∏µ‡πâ] ‚≠êÔ∏è (‡∏à‡∏≤‡∏Å dashboard.html)
        document.addEventListener('DOMContentLoaded', function() {
            
            // --- (‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á Home ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô) ---
            loadHomeSummary();
            const saveBtn = document.getElementById('saveInitialDataButton');
            if (saveBtn) {
                saveBtn.addEventListener('click', saveInitialData);
            }
            
            // --- (‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á Dashboard ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô) ---
            const calendarEl = document.getElementById('calendar');
            const logSection = document.getElementById('log-section');
            const dateTitle = document.getElementById('selected-date-title');
            const saveButton = document.getElementById('saveButton');
            let selectedDateStr = null;

            // (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ calendarEl ‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏±‡∏ô)
            if (calendarEl) {
                const calendar = new FullCalendar.Calendar(calendarEl, {
                    initialView: 'dayGridMonth',
                    locale: 'th',
                    height: "auto",
                    events: '/api/get-events', // ‚≠êÔ∏è ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ API ‡∏ó‡∏µ‡πà‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå
                    
                    dateClick: function(info) {
                        selectedDateStr = info.dateStr;
                        const d = new Date(info.dateStr);
                        const formattedDate = d.toLocaleString("th-TH", {
                            year: 'numeric', month: 'long', day: 'numeric'
                        });
                        dateTitle.textContent = `‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${formattedDate}`;

                        fetch(`/api/analyze?date=${selectedDateStr}`)
                            .then(res => res.json())
                            .then(data => {
                                clearSelections(); 
                                if (data.status === 'success') {
                                    populateForm(data);
                                } 
                                logSection.style.display = 'block';
                            })
                            .catch(err => {
                                console.error("Error fetching data:", err);
                                clearSelections();
                                logSection.style.display = 'block';
                            });
                    }
                });
                calendar.render();

                // (‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô JS ‡∏Ç‡∏≠‡∏á Dashboard)
                function clearSelections() {
                    document.querySelectorAll('.mood.active, .symptom.active, .flow.active, .color-option.active')
                    .forEach(el => el.classList.remove('active'));
                    document.getElementById('notes').value = '';
                }
                
                function populateForm(data) {
                    if (data.mood) {
                    document.querySelector(`.mood[data-value="${data.mood}"]`)?.classList.add('active');
                    }
                    if (data.symptoms && data.symptoms.length > 0) {
                    data.symptoms.forEach(symptomValue => {
                        if (symptomValue) { 
                        document.querySelector(`.symptom[data-value="${symptomValue}"]`)?.classList.add('active');
                        }
                    });
                    }
                    if (data.flow) {
                    document.querySelector(`.flow[data-value="${data.flow}"]`)?.classList.add('active');
                    }
                    if (data.color) {
                    document.querySelector(`.color-option[data-value="${data.color}"]`)?.classList.add('active');
                    }
                    document.getElementById('notes').value = data.notes || '';
                }

                setupToggle('.symptom', false);
                setupToggle('.mood', true);
                setupToggle('.flow', true);
                setupToggle('.color-option', true);

                function setupToggle(selector, isSingle) {
                    const elements = document.querySelectorAll(selector);
                    elements.forEach(el => {
                    el.addEventListener('click', () => {
                        if (isSingle) {
                        elements.forEach(e => e.classList.remove('active'));
                        el.classList.add('active');
                        } else {
                        el.classList.toggle('active');
                        }
                    });
                    });
                }

                saveButton.addEventListener('click', () => {
                    if (!selectedDateStr) return alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà');
                    
                    const mood = document.querySelector('.mood.active')?.dataset.value || null;
                    const symptoms = Array.from(document.querySelectorAll('.symptom.active')).map(el => el.dataset.value);
                    const flow = document.querySelector('.flow.active')?.dataset.value || null;
                    const color = document.querySelector('.color-option.active')?.dataset.value || null;
                    const notes = document.getElementById('notes').value;
                    
                    const dailyData = { date: selectedDateStr, mood, symptoms, flow, color, notes };

                    fetch('/api/save-log', {
                    method: 'POST', headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(dailyData),
                    })
                    .then(r => r.json())
                    .then(data => {
                        if (data.status === 'success') {
                            calendar.removeAllEventSources(); 
                            calendar.addEventSource(data.new_events);
                            calendar.refetchEvents();
                            // ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‚≠êÔ∏è ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏•‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå (Analysis)
                            window.location.href = `/show_result?date=${selectedDateStr}`;
                        } else alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ' + data.message);
                    })
                    .catch(() => alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ'));
                });

            } // (‡∏à‡∏ö if(calendarEl))

        }); // (‡∏à‡∏ö DOMContentLoaded)
    </script>
</body>
</html>